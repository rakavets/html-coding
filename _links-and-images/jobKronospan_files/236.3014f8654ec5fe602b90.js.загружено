(window.webpackJsonp=window.webpackJsonp||[]).push([[236],{1930:function(e,a,t){"use strict";var r=t(1),n=t.n(r),c=t(0),o=t.n(c),u=t(1437),s=t(1931),i=t(1436),l=t(85),m=t(143),v=t(1536),h=t(1444),b=t(1511),f=t(38),d=t(601),p=t(1446),S=t(1455),y=t(1541);function g(e,a,t,r,n,c,o){try{var u=e[c](o),s=u.value}catch(e){return void t(e)}u.done?a(s):Promise.resolve(s).then(r,n)}function E(e,a){return function(e){if(Array.isArray(e))return e}(e)||function(e,a){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var t=[],r=!0,n=!1,c=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(t.push(o.value),!a||t.length!==a);r=!0);}catch(e){n=!0,c=e}finally{try{r||null==u.return||u.return()}finally{if(n)throw c}}return t}(e,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var w=new RegExp(/^[^\s]+@[^\s]+\.[^\s]+$/gi),O=function e(a){var t=a.trls,c=a.employerId,o=a.autosearchName,u=a.userType,i=a.autosearchSave,h=a.addNotification,y=a.setEmployerButton,O=a.toggleShouldLogin,N=a.toggleShowModal,j=a.count,x=a.userEmail,k=a.emailRequired,R=E(Object(S.a)(!1),2),T=R[0],A=R[1],C=E(Object(r.useState)(""),2),I=C[0],M=C[1],P=Object(r.useRef)(),q=Object(r.useCallback)((function(){u!==p.a.ANONYMOUS&&u!==p.a.APPLICANT||Object(f.default)({toStorage:"hh",data:{type:u,goal:"follow_vacancies"}})}),[u]),B=Object(r.useCallback)((function(){u===p.a.APPLICANT&&Object(d.sendAnalyticsWatchForVacancies)()}),[u]),L=Object(r.useCallback)(function(){var a,r=(a=regeneratorRuntime.mark((function a(r){var n,l,m;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(l=P.current.value,r||A(),q(),r||w.test(l.trim())){a.next=7;break}return M(t[e.trls.saveSearchWrongEmail]),A(),a.abrupt("return");case 7:return a.prev=7,a.next=10,i({email:l.trim(),employerId:c,autosearchName:o});case 10:m=a.sent,a.next=18;break;case 13:if(a.prev=13,a.t0=a.catch(7),a.t0.message!==s.a.CONFLICT){a.next=18;break}return O(),a.abrupt("return");case 18:if((null===(n=m)||void 0===n?void 0:n.state)!==s.a.SUCCESS){a.next=24;break}return r||N(),h(r?b.f:b.e),u===p.a.ANONYMOUS?y({saveSearch:null}):y({saveSearch:{count:(j||0)+1,emailRequired:k,userEmail:x}}),B(),a.abrupt("return");case 24:M(t[e.trls.saveSearchError]);case 25:case"end":return a.stop()}}),a,null,[[7,13]])})),function(){var e=this,t=arguments;return new Promise((function(r,n){var c=a.apply(e,t);function o(e){g(c,r,n,o,u,"next",e)}function u(e){g(c,r,n,o,u,"throw",e)}o(void 0)}))});return function(e){return r.apply(this,arguments)}}(),[q,t,A,i,c,o,O,h,u,B,N,y,j,k,x]);return Object(r.useEffect)((function(){!x||k||j||(N(),L(!0))}),[j,k,L,N,x]),n.a.createElement("div",{"data-qa":"vacancy-upgrade-menu"},n.a.createElement("div",{className:"save-search-text"},t[e.trls.subscribeModalText]),n.a.createElement(v.a,{show:!!I},I),n.a.createElement("form",{onSubmit:function(e){e.preventDefault(),L()}},n.a.createElement("div",{className:"save-search-email"},n.a.createElement(l.a,{ref:P,type:l.a.types.email,name:"email",autoFocus:!0})),n.a.createElement(m.b,{kind:m.b.kinds.primary,type:"submit",disabled:T,"data-qa":"autosearch-subscribe__submit"},t[e.trls.saveSearchButton])))};O.displayName="Employer/Sidebar/SaveSearch/SaveSearch",O.propTypes={trls:o.a.object,employerId:o.a.number,autosearchName:o.a.string,setEmployerButton:o.a.func,toggleShouldLogin:o.a.func,toggleShowModal:o.a.func,count:o.a.number,emailRequired:o.a.bool,userEmail:o.a.string,userType:o.a.string,autosearchSave:o.a.func,addNotification:o.a.func},O.trls={saveSearchWrongEmail:"vacancySearchResults.saveSearch.wrongEmail.text",saveSearchError:"vacancySearchResults.saveSearch.error.title",subscribeModalText:"vacancySearchResults.saveSearch.withEmail.text",saveSearchButton:"vacancySearchResults.saveSearch.withEmail.save"},a.a=Object(u.connect)((function(e){return{userType:e.userType}}),{autosearchSave:s.b,addNotification:h.a,setEmployerButton:y.b})(Object(i.b)(O))}}]);
//# sourceMappingURL=236.3014f8654ec5fe602b90.js.map